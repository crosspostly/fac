# –ú–æ–¥—É–ª—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: –¶–£–ü –ö—É–ª–∏–Ω–∞—Ä–∏—è (RuTube)

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É–ª–∏–Ω–∞—Ä–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏ –≤–∏–¥–µ–æ-—É—Ä–æ–∫–æ–≤ –Ω–∞ –∫–∞–Ω–∞–ª Rutube.

## üîÑ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã (–Ø–Ω–≤–∞—Ä—å 2026)

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ç—Ä–∏ —ç—Ç–∞–ø–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏:
1.  **–°–±–æ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (Full Info):** –°–∫—Ä–∏–ø—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç YouTube, –∞ –∑–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ –¥–µ–ª–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å (`--dump-json`), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å **–ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫** –±–µ–∑ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π.
2.  **–ó–∞–≥—Ä—É–∑–∫–∞ –í–∏–¥–µ–æ (External Host):** –í–∏–¥–µ–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ (**Catbox.moe**), –ø–æ–ª—É—á–∞–µ–º –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –∏ –ø–µ—Ä–µ–¥–∞–µ–º –µ—ë –≤ API Rutube. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑–≤–Ω–µ.
3.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –û–±–ª–æ–∂–∫–∏ (Playwright):** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è "–±–µ–∑–≥–æ–ª–æ–≤—ã–π" –±—Ä–∞—É–∑–µ—Ä, –∑–∞—Ö–æ–¥–∏—Ç –≤ Rutube –°—Ç—É–¥–∏—é –∏ **–≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–¥—Ä –æ–±–ª–æ–∂–∫–∏ –Ω–∞ 00:01**.
4.  **–ö—Ä–æ—Å—Å–ø–æ—Å—Ç–∏–Ω–≥ (Socials):**
    *   **TikTok:** –í—Å–µ **–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ** –≤–∏–¥–µ–æ (Shorts) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ TikTok. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è (–ø—Ä–æ–ø–∞—Ç—á–µ–Ω–Ω–∞—è) –±–∏–±–ª–∏–æ—Ç–µ–∫–∞.
    *   **Instagram:** –í—Ä–µ–º–µ–Ω–Ω–æ **–æ—Ç–∫–ª—é—á–µ–Ω** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ "—á–∏—Å—Ç—ã—Ö" –∫—É–∫–æ–≤ –∏–∑-–∑–∞ —Å–º–µ–Ω—ã IP).
    *   **Rutube:** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç **–≤—Å–µ** –≤–∏–¥–µ–æ (–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ, –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ).

## üåç –ö—Ä–æ—Å—Å–ø–æ—Å—Ç–∏–Ω–≥ (Instagram & TikTok)

–ú–æ–¥—É–ª—å `insta_tok` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å.

### TikTok (–ê–∫—Ç–∏–≤–µ–Ω ‚úÖ)
*   **–õ–æ–≥–∏–∫–∞:** –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–µ–π (9:16). –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è.
*   **–û–ø–∏—Å–∞–Ω–∏–µ:** –í TikTok –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è** —Å YouTube (—Ä–µ—Ü–µ–ø—Ç). –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∏–¥–µ–æ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è.
*   **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—É–∫–∏ –∏–∑ `insta_tok/tiktok_cookies.txt`.
*   **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `tiktok-uploader` –≤ `venv` –ø—Ä–æ–ø–∞—Ç—á–µ–Ω–∞ (`apply_patch.py`), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫ TikTok.
*   **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**
    **–í–∞–∂–Ω–æ:** –î–ª—è —Ä–∞–±–æ—Ç—ã —Å TikTok –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å python –∏–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è `venv`.
    ```bash
    ./insta_tok/venv/bin/python insta_tok/publish_tiktok.py video.mp4 "–û–ø–∏—Å–∞–Ω–∏–µ"
    ```

### Instagram (–ü–∞—É–∑–∞ ‚è∏Ô∏è)
*   **–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç "—á–∏—Å—Ç—É—é" —Å–µ—Å—Å–∏—é –±–µ–∑ –º—É–ª—å—Ç–∏-–∞–∫–∫–∞—É–Ω—Ç–æ–≤. –¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è (`pp_witch_session.json`) —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
*   **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏):**
    ```bash
    ./insta_tok/venv/bin/python insta_tok/publish_pp_witch.py video.mp4 "–û–ø–∏—Å–∞–Ω–∏–µ"
    ```

---

## ‚òÅÔ∏è GitHub Actions: –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –æ–±–ª–∞–∫–µ GitHub. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –∫–æ–º–ø—å—é—Ç–µ—Ä.

### üîê 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¢–æ–∫–µ–Ω–∞–º–∏ –∏ –°–µ–∫—Ä–µ—Ç–∞–º–∏

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫—É–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **Secrets**. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–∞–π–ª—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ (`config.py`, `cookies.txt`) –Ω–∞–ø—Ä—è–º—É—é –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

#### –ì–¥–µ –Ω–∞–π—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
–í –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ GitHub: **Settings** -> **Secrets and variables** -> **Actions**.

#### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –°–µ–∫—Ä–µ—Ç—ã (Repository Secrets):

| –ò–º—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å |
| :--- | :--- | :--- |
| `CONFIG_PY` | –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `config.py`. | –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `config.py` (—Ç–æ–∫–µ–Ω—ã, –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å Rutube). |
| `RUTUBE_COOKIES_JSON` | –ö—É–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (Playwright). | –§–∞–π–ª `rutube_cookies.json` (—ç–∫—Å–ø–æ—Ä—Ç –∏–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è EditThisCookie). |
| `TIKTOK_COOKIES_TXT` | –ö—É–∫–∏ –¥–ª—è TikTok. | –§–∞–π–ª `tiktok_cookies.txt` (—Ñ–æ—Ä–º–∞—Ç Netscape). |
| `YOUTUBE_COOKIES_TXT` | –ö—É–∫–∏ –¥–ª—è YouTube (—á—Ç–æ–±—ã –∫–∞—á–∞—Ç—å 1080p+). | –§–∞–π–ª `youtube_cookies.txt` (—Ñ–æ—Ä–º–∞—Ç Netscape). |
| `YOUTUBE_EMAIL` | –õ–æ–≥–∏–Ω Google/YouTube –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è cookies. | E-mail –∞–∫–∫–∞—É–Ω—Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–∞—á–∞—é—Ç—Å—è –≤–∏–¥–µ–æ –Ω–∞ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª. |
| `YOUTUBE_PASSWORD` | –ü–∞—Ä–æ–ª—å –æ—Ç —ç—Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Playwright –≤–Ω—É—Ç—Ä–∏ GitHub Actions). | –¢–æ—Ç –∂–µ –ø–∞—Ä–æ–ª—å, —á—Ç–æ –∏ –¥–ª—è –≤—Ö–æ–¥–∞ –Ω–∞ YouTube. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç, –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π. |
| `PAT_TOKEN` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | Personal Access Token —Å –ø—Ä–∞–≤–∞–º–∏ `repo`, `workflow` ‚Äî –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞ `YOUTUBE_COOKIES_TXT`. | –°–æ–∑–¥–∞–µ—Ç—Å—è –≤ GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens (classic). |
| `TELEGRAM_TOKEN` | –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞. | –û—Ç `@BotFather`. |
| `TELEGRAM_TO` | –í–∞—à ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. | –û—Ç `@userinfobot`. |

---

### üîÅ 2. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ YouTube cookies (–Ω–æ–≤–æ–µ)

–ß—Ç–æ–±—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å `YOUTUBE_COOKIES_TXT` –≤—Ä—É—á–Ω—É—é, –¥–æ–±–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π workflow:

*   **–§–∞–π–ª:** `.github/workflows/auto_refresh_youtube_cookies.yml`
*   **–ò–º—è:** `Auto Refresh YouTube Cookies`
*   **–¢—Ä–∏–≥–≥–µ—Ä—ã:**
    * –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é ‚Äî —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (cron)
    * –≤—Ä—É—á–Ω—É—é ‚Äî —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É **Actions** ‚Üí `Auto Refresh YouTube Cookies` ‚Üí **Run workflow**

#### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç workflow

1. –ó–∞–ø—É—Å–∫–∞–µ—Ç Playwright –≤ GitHub Actions.
2. –õ–æ–≥–∏–Ω–∏—Ç—Å—è –Ω–∞ YouTube —Å –ø–æ–º–æ—â—å—é `YOUTUBE_EMAIL` –∏ `YOUTUBE_PASSWORD`.
3. –ó–∞–±–∏—Ä–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ cookies –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç Netscape.
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª `youtube_cookies_new.txt` –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –µ–≥–æ –∫–∞–∫ artifact `youtube-cookies-backup` (–º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —Ä—É–∫–∞–º–∏ –∏–∑ –ª—é–±–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞).
5. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω —Å–µ–∫—Ä–µ—Ç `PAT_TOKEN`:
   * –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub CLI (`gh secret set`), —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–Ω—ã–π —Å–µ–∫—Ä–µ—Ç `YOUTUBE_COOKIES_TXT`.
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

#### –í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**1) –ü–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

* –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã `YOUTUBE_EMAIL`, `YOUTUBE_PASSWORD` –∏ `PAT_TOKEN`.
* –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é workflow —Å–∞–º –æ–±–Ω–æ–≤–∏—Ç `YOUTUBE_COOKIES_TXT` –∏ –ø—Ä–∏—à–ª–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

**2) –ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç (–±–µ–∑ PAT_TOKEN):**

* –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ `YOUTUBE_EMAIL` –∏ `YOUTUBE_PASSWORD`.
* Workflow –≤—Å—ë —Ä–∞–≤–Ω–æ:
  * –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ YouTube,
  * –ø–æ–ª—É—á–∏—Ç —Å–≤–µ–∂–∏–µ cookies,
  * —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ artifact `youtube-cookies-backup`.
* –î–∞–ª—å—à–µ:
  * —Å–∫–∞—á–∞—Ç—å artifact,
  * —Ä—É–∫–∞–º–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç `YOUTUBE_COOKIES_TXT` —á–µ—Ä–µ–∑ UI –∏–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π:
    ```bash
    gh secret set YOUTUBE_COOKIES_TXT < youtube_cookies_new.txt
    ```

> –í–∞–∂–Ω–æ: `GITHUB_TOKEN` –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º GitHub **–Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞** –º–µ–Ω—è—Ç—å secrets —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π `PAT_TOKEN`, –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –ø–æ–ª–Ω–æ–≥–æ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞.

---

### üíª 3. –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ö–æ–Ω—Å–æ–ª—å (GitHub CLI)

–í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –±–æ—Ç–æ–º –ø—Ä—è–º–æ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –Ω–µ –∑–∞—Ö–æ–¥—è –Ω–∞ —Å–∞–π—Ç. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ `gh`.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `gh` (Ubuntu/Debian):
```bash
(type -p wget >/dev/null || (sudo apt update && sudo apt-get install wget -y)) \
&& sudo mkdir -p -m 755 /etc/apt/keyrings \
&& wget -qO- https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo tee /etc/apt/keyrings/githubcli-archive-keyring.gpg > /dev/null \
&& sudo chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg \
&& echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null \
&& sudo apt update \
&& sudo apt install gh -y
```

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
–í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è **Personal Access Token (Classic)**.
1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://github.com/settings/tokens
2.  –ù–∞–∂–º–∏—Ç–µ **Generate new token (classic)**.
3.  –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞: `repo` (–≤—Å–µ –≥–∞–ª–æ—á–∫–∏), `workflow`, `read:org`.
4.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ `ghp_...`).
5.  –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    echo "–í–ê–®_–¢–û–ö–ï–ù" | gh auth login --with-token
    ```

#### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

*   **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ:**
    ```bash
    gh workflow run rutube_sync.yml
    ```

*   **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:**
    ```bash
    gh run list --limit 1
    ```

*   **–°–ª–µ–¥–∏—Ç—å –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∫ –≤ –º–∞—Ç—Ä–∏—Ü–µ üï∂Ô∏è):**
    ```bash
    gh run watch
    ```

*   **–û–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—ã–µ –∫—É–∫–∏):**
    ```bash
    gh secret set RUTUBE_COOKIES_JSON < rutube_cookies.json
    ```

---


### ü§ñ 4. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç –≤ GitHub
*   **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞**.
*   **–°–∞–º–æ–ª–µ—á–µ–Ω–∏–µ:** –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫ –ø–∞–¥–∞–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–±–æ–π —Å–µ—Ç–∏), –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–±—É–µ—Ç —Å–Ω–æ–≤–∞ (–¥–æ 2 –ø–æ–ø—ã—Ç–æ–∫).
*   **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –í —Å–ª—É—á–∞–µ **–æ—à–∏–±–∫–∏** –±–æ—Ç –ø—Ä–∏—à–ª–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ª–æ–≥–∏.
*   **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `sync_db.sqlite` (–±–∞–∑–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç **Commit –∏ Push** –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. **–í–∞–∂–Ω–æ:** –ë–æ—Ç —Å–∞–º –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ–π –∫–æ–¥/–±–∞–∑—É, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ `git pull`.

---

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –ó–∞–ø—É—Å–∫ (Systemd / –õ–æ–∫–∞–ª—å–Ω–æ)

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É 24/7 –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

### –°—Ç–∞—Ç—É—Å –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–ë–æ—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `systemd` (—Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

*   **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:**
    ```bash
    systemctl --user status rutube-bot
    ```
*   **–°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏):**
    ```bash
    tail -f scheduler.log
    ```
*   **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
    ```bash
    systemctl --user restart rutube-bot
    ```

---


## üõ† –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏ –æ—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–≤–Ω–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ python –∏–∑ `venv`, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª TikTok:
```bash
./venv/bin/python3 sync_production.py
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–≤ –ø–∞–ø–∫–µ `tools/`)
*   `tools/sync_db_from_rutube.py` ‚Äî –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–±–∏–ª–∞—Å—å, —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–∫–∞—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ —Å Rutube –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã).
*   `tools/check_status.py <ID>` ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ API.
*   `tools/test_catbox.py` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –æ–±–º–µ–Ω–Ω–∏–∫–∞.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

*   **`sync_production.py`** ‚Äî –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Catbox –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫.
*   **`set_frame_playwright.py`** ‚Äî –ú–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–±–ª–æ–∂–∫–∏ (–∫–∞–¥—Ä 00:01).
*   **`rutube_cookies.json`** ‚Äî –ö—É–∫–∏ –¥–ª—è Playwright (–Ω—É–∂–Ω—ã –¥–ª—è —Å–º–µ–Ω—ã –æ–±–ª–æ–∂–∫–∏).
*   **`sync_db.sqlite`** ‚Äî –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ.
*   **`insta_tok/`** ‚Äî –ú–æ–¥—É–ª—å –∫—Ä–æ—Å—Å–ø–æ—Å—Ç–∏–Ω–≥–∞ (—Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ–µ `venv`, –ø–∞—Ç—á–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã).

## üö® Troubleshooting

### 1. –û—à–∏–±–∫–∞ "Social uploader module not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π Python (`python3 sync_production.py`), –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è TikTok.
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —á–µ—Ä–µ–∑ `venv`: `./venv/bin/python3 sync_production.py`.

### 2. –í–∏–¥–µ–æ –¥–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ Rutube
**–ü—Ä–∏—á–∏–Ω–∞:** –û—á–µ—Ä–µ–¥–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Rutube. –°–∫—Ä–∏–ø—Ç –∂–¥–µ—Ç –¥–æ 10 –º–∏–Ω—É—Ç. –ï—Å–ª–∏ –Ω–µ —É—Å–ø–µ–ª ‚Äî –≤–∏–¥–µ–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, –ø—Ä–æ—Å—Ç–æ –æ–±–ª–æ–∂–∫–∞ (00:01) –º–æ–∂–µ—Ç –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Å—Ä–∞–∑—É.

### 3. "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª" –∑–∞–≥—Ä—É–∑–∫–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –≤–∏–¥–µ–æ
**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–∫—Ä–∏–ø—Ç –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤–∏–¥–µ–æ —É–∂–µ –Ω–∞ Rutube).
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python3 tools/sync_db_from_rutube.py`.

### 4. –û—à–∏–±–∫–∞ –ø—Ä–∏ `git pull` –≤ GitHub Actions (Error 128)
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –∏–∑–º–µ–Ω–∏–ª –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ —É—Å–ø–µ–ª –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –µ—ë –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ª–æ–≥–∏–∫–µ workflow (—Å–Ω–∞—á–∞–ª–∞ –∫–æ–º–º–∏—Ç, –ø–æ—Ç–æ–º pull --rebase). –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git pull --rebase --autostash`.
